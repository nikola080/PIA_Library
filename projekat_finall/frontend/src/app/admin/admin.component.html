<div *ngIf = "admin == null">
    <br>
<br>

<div class="row center">
    <div class="col-sm-3">
        <h2 style="text-align: center;">LogIn</h2>
    </div>
</div>
<div class="row center mb-2">
    <div class="col-sm-1">Username:</div>
    <div class="col-sm-2">
        <div class="input-group mb-2" >
            <input type="text" class="form-control"   placeholder="Insert username" [(ngModel)]="usernameAdmin" [ngClass]="formSubmited ? (err_usernameAdmin != '' ? 'border border-danger': 'border-success' ) : ''">
        </div>
    </div>
</div>
<div class="row center  mb-2" *ngIf = "err_usernameAdmin != ''">
    <div class="col-sm-3">
        <span class = 'text-danger'>{{err_usernameAdmin}}</span>
    </div>
</div>
<div class="row center  mb-2">
    <div class="col-sm-1">Password:</div>
    <div class="col-sm-2">
        <div class="input-group mb-2" >
            <input type="password" class="form-control"   placeholder="Insert password" [(ngModel)]="passwordAdmin" [ngClass]="formSubmited ? (err_passwordAdmin != '' ? 'border border-danger': 'border-success' ) : ''">
        </div>
    </div>
</div>
<div class="row center  mb-2" *ngIf = "err_passwordAdmin != ''">
    <div class="col-sm-3">
        <span class = 'text-danger'>{{err_passwordAdmin}}</span>
    </div>
</div>
<div class="row center ">
    <div class="col-sm-3 d-flex">
        <button class = 'btn btn-primary flex-grow-1' (click)="logIn()">logIn</button>
    </div>
    
</div>
</div>
<div *ngIf = "admin">

    <div class="row center bg-primary">
        <div class="col-sm-1">
            <u style="text-align: center" (click)="logOut()">LogOut</u>
        </div>
    </div>
    <div class="row center">
        <div class="col-sm-3">
            <h2 style="text-align: center;">Modifiable users</h2>
        </div>
    </div>
    <table class = "table table-striped table-hover">
        <thead class = "thead-light">
            <th scope="col">#</th>
            <th scope="col">Username</th>
            <th scope="col">First name</th>
            <th scope="col">Last name</th>
            <th scope="col">Adress</th>
            <th scope="col">Phone</th>
            <th scope="col">Email</th>
            <th scope="col">Picture</th>
        </thead>
        <tbody>
            <tr *ngFor = 'let user of users;let inx = index'>
                <td class = "over">{{inx}}</td>
                <td class = "over">{{user.username}}</td>
                <td class = "over">{{user.firstName}}</td>
                <td class = "over">{{user.lastName}}</td>
                <td class = "over">{{user.adress}}</td>
                <td class = "over">{{user.phone}}</td>
                <td class = "over">{{user.email}}</td>
                <td class = "over"><img [src]="'/assets/' + user.picture" alt="" class="m100"></td>
                <td><button class = 'btn btn-secondary' (click)="deleteUser(user._id,user.picture)">delete</button></td>
            </tr>
        </tbody>
    </table> 

    <br><br>

    <div class="row center">
        <div class="col-sm-3">
            <h2 style="text-align: center;">Modifiable books</h2>
        </div>
    </div>
    <table class = "table table-striped table-hover">
        <thead class = "thead-light">
            <th scope="col">#</th>
            <th scope="col">Book name</th>
            <th scope="col">Authors</th>
            <th scope="col">Genre</th>
            <th scope="col">Publisher</th>
            <th scope="col">Publishing year</th>
            <th scope="col">Language</th>
            <th scope="col">Picture</th>
        </thead>
        <tbody>
            <tr *ngFor = 'let book of books;let inx = index'>
                <td class = "over">{{inx}}</td>
                <td class = "over">{{book.name}}</td>
                <td class = "over">
                    <div *ngFor = "let auth of book.authors;let ind = index">
                        - {{auth}} 
                    </div>
                </td >
                <td class = "over">{{book.genre}}</td>
                <td class = "over">{{book.publisher}}</td>
                <td class = "over">{{book.publishingYear}}</td>
                <td class = "over">{{book.language}}</td>
                <td class = "over"><img [src]="'/assets/' + book.picture" alt="" class="m100"></td>
                <td><button class = 'btn btn-secondary' (click)="deleteBook(book._id,book.picture)">delete</button></td>
            </tr>
        </tbody>
    </table>

    <br><br>

    <div class="row center">
        <div class="col-sm-3">
            <h2 style="text-align: center;">Requeted users</h2>
        </div>
    </div>
    <table class = "table table-striped table-hover">
        <thead class = "thead-light">
            <th scope="col">#</th>
            <th scope="col">Username</th>
            <th scope="col">First name</th>
            <th scope="col">Last name</th>
            <th scope="col">Adress</th>
            <th scope="col">Phone</th>
            <th scope="col">Email</th>
            <th scope="col">Picture</th>
        </thead>
        <tbody>
            <tr *ngFor = 'let user of req_users;let inx = index'>
                <td class = "over">{{inx}}</td>
                <td class = "over">{{user.username}}</td>
                <td class = "over">{{user.firstName}}</td>
                <td class = "over">{{user.lastName}}</td>
                <td class = "over">{{user.adress}}</td>
                <td class = "over">{{user.phone}}</td>
                <td class = "over">{{user.email}}</td>
                <td class = "over"><img [src]="'/assets/' + user.picture" alt="" class="m100"></td>
                <td><button class = 'btn btn-secondary' (click)="acceptUser(user._id)">accept</button></td>
                <td><button class = 'btn btn-secondary' (click)="deleteUser(user._id,user.picture)">reject</button></td>
            </tr>
        </tbody>
    </table> 
    <br>

    <br>
<div class="row center mb-4">
    <div class="col-sm-5 align-self-center "><span class="d-flex justify-content-end">To open or close form for adding a
            new book click on buttons : </span> </div>
    <div class="col-sm-1">
        <button class="btn btn-primary" (click)="formOpenAddNewBook = true">open </button>

    </div>

    <div class="col-sm-1">
        <button class="btn btn-primary" (click)="formOpenAddNewBook = false; resetBookInputs()">close </button>
    </div>

</div>

<div *ngIf="formOpenAddNewBook">
    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2" >
                <input type="text" class="form-control"   placeholder="Insert name of the book" [(ngModel)]="addName" [ngClass]="formSubmitedd ? (wrongInput[0] != '' ? 'border border-danger': 'border-success' ) : ''">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[0]}}
        </div>
    </div>

    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2">
                <input type="text" class="form-control" [ngClass]="formSubmitedd ? (wrongInput[1] != '' ? 'border border-danger': 'border-success' ) : ''" placeholder="Insert name(s) of author(s), eg. (author1,author2...)" [(ngModel)]="addAuthors">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[1]}}
        </div>
    </div>

    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2" >
                <input type="text" class="form-control" placeholder="Insert genre of the book" [(ngModel)]="addGenre" [ngClass]="formSubmitedd ? (wrongInput[2] != '' ? 'border border-danger': 'border-success' ) : ''">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[2]}}
        </div>
    </div>

    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2"  >
                <input type="text" class="form-control" placeholder="Insert name of the publisher"
                    [(ngModel)]="addPublisher" [ngClass]="formSubmitedd ? (wrongInput[3] != '' ? 'border border-danger': 'border-success' ) : ''">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[3]}}
        </div>
    </div>

    <div class="row center " >
        <div class="col-sm-6">
            <div class="input-group mb-2" >
                <input type="number" class="form-control" placeholder="Insert year of publishing"
                    [(ngModel)]="addPublishingYear"[ngClass]="formSubmitedd ? (wrongInput[4] != '' ? 'border border-danger': 'border-success' ) : ''"> 
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[4]}}
        </div>
    </div>

    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2">
                <input type="text" class="form-control" placeholder="Insert the language in which the book is written"
                    [(ngModel)]="addLanguage"  [ngClass]="formSubmitedd ? (wrongInput[5] != '' ? 'border border-danger': 'border-success' ) : ''">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[5]}}
        </div>
    </div>


    
    <div class="row center ">
        <div class="col-sm-6">
            <div class="input-group mb-2">
                <input type="text" class="form-control" placeholder="Insert number of copies"
                    [(ngModel)]="addAmount"  [ngClass]="formSubmitedd ? (wrongInput[6] != '' ? 'border border-danger': 'border-success' ) : ''">
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 offset-3 text-danger">
            {{wrongInput[6]}}
        </div>
    </div>


    <div class="row center d-flex mb-4">
        <div class="col-sm-3 rounded">
            <div class="custom-file " >
                <input type="file" accept = "image/png, image/jpeg" (change) = "bookPictureImage($event)" name = 'bookPicture'  class="custom-file-input"
                id="validatedCustomFile" [ngClass]="formSubmitedd? (addPicture  == null ? 'border border-danger' : 'border border-success') : ''">
             
            </div>
        </div>

        <div class="col-sm-3">
            <label class="custom-file-label justify-content-end" for="validatedCustomFile">Insert picture of the
                book...</label>
        </div>
    </div>

    <div class="row center " >
        <div class="col-sm-6">
            <button class = "btn btn-primary col-sm-12" (click)="addNewBook()">add book</button>
        </div>
    </div>

</div>

<br><br>

<div class="row center">
    <div class = 'col-sm-6 rounded firstContainer' >
        <div class="row center">       
            <div class="col-sm-4">
                <p style="font-size: 24px;">Register new user</p>
            </div>
        </div>
    
        <div class="row center">
            
            <div class="col-sm-2">
                Username:
            </div>
            <div class="col-sm-4">
                <input type="text" [(ngModel)] = 'username'>
            </div>
            
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3">
                <div class = 'text-danger' *ngIf = "er_username != ''; else br">
                    {{er_username}} 
                </div>
                
            </div>  
                
        </div>
        <ng-template #br> <br> </ng-template>
    
        <div class="row center">
            <div class="col-sm-2">
                Password: 
            </div>
            <div class="col-sm-4">
                <input type="password" [(ngModel)] = 'password_r'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_password != ''; else br">
                    {{er_password}}
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                Firstname: 
            </div>
            <div class="col-sm-4">
                <input type="text" [(ngModel)] = 'firstName'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_firstName != ''; else br">
                    {{er_firstName}}
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                Lastname: 
            </div>
            <div class="col-sm-4">
                <input type="text" [(ngModel)] = 'lastName'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_lastName != ''; else br">
                    {{er_lastName}}
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                Adress: 
            </div>
            <div class="col-sm-4">
                <input type="text" [(ngModel)] = 'adress'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_adress != ''; else br">
                    {{er_adress}}
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                Phone: 
            </div>
            <div class="col-sm-4">
                <input type="text" [(ngModel)] = 'phone'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_phone != ''; else br">
                    {{er_phone}} 
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                E-mail: 
            </div>
            <div class="col-sm-4">
                <input type="email" [(ngModel)] = 'email'>
            </div>
        </div>
        <div class="row ">
            <div class="col-sm-6 offset-sm-3 text-danger">
                <div *ngIf = "er_email != ''; else br">
                    {{er_email}}
                </div>
                
            </div>        
        </div>
        <ng-template #br> <br> </ng-template>
        
        <div class="row center">
            <div class="col-sm-2">
                Picture: 
            </div>
            <div class="col-sm-4">
                <input type="file" accept="image/png, image/jpg" (change) = "profilePictureImage($event)" name = 'profilePicture'>
            </div>
        </div>
        <br>
        <div class="row center">
            <div class="col-sm-2">
                <button type="button" class="btn btn-primary" (click) = 'register()'> register </button>
            </div>
        </div>
        <br>

    </div>
</div>
<br><br>

<div class="row center">
    <div class="col-sm-3">
        <h2 style="text-align: center;">All users</h2>
    </div>
</div>
<table class = "table table-striped table-hover">
    <thead class = "thead-light">
        <th scope="col">#</th>
        <th scope="col">Username</th>
        <th scope="col">First name</th>
        <th scope="col">Last name</th>
        <th scope="col">Adress</th>
        <th scope="col">Phone</th>
        <th scope="col">Email</th>
        <th scope="col">Picture</th>
    </thead>
    <tbody>
        <tr *ngFor = 'let user of all_users;let inx = index'>
            <td class = "over">{{inx}}</td>
            <td class = "over">{{user.username}}</td>
            <td class = "over">{{user.firstName}}</td>
            <td class = "over">{{user.lastName}}</td>
            <td class = "over">{{user.adress}}</td>
            <td class = "over">{{user.phone}}</td>
            <td class = "over">{{user.email}}</td>
            <td class = "over"><img [src]="'/assets/' + user.picture" alt="" class="m100"></td>
            <td *ngIf = "user.type === 'reader'"><button class = 'btn btn-secondary' (click)="upgrade(user._id)">upgrade</button></td>
            <td *ngIf = "user.type === 'moderator'"><button class = 'btn btn-secondary' (click)="degrade(user._id)">degrade</button></td>
            <td *ngIf = "user.blocked === '0'"><button class = 'btn btn-secondary' (click)="block(user._id)">block</button></td>
            <td *ngIf = "user.blocked === '1'"><button class = 'btn btn-secondary' (click)="unblock(user._id)">unblock</button></td>
        </tr>
    </tbody>
</table> 
<br>

<div class="row center">
    <div class="col-sm-3">Change number of days to extend borrowing of books : </div>
    <div class="col-sm-3">
        <div class="input-group mb-2" >
            <input type="number" class="form-control" placeholder="Insert number of days" [(ngModel)]="numberDays">
        </div>
    </div>
    <div class="col-sm-1">
        <button class = 'btn btn-primary'(click)="changeNumberOfDays()" >change</button>
    </div>
    
</div>
<div class = 'row center' *ngIf = "numberDaysError !== ''">
    <div class="col-sm-7">
        <span class = 'text-danger'>{{numberDaysError}}</span>
    </div>
   
</div>
<br><br>
</div>
    